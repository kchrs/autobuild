#I left the keys inside so you can see, but "corrupted them so they are not walid, also the base script line is posted before the actual ones so you can see what should be changed."

#!/bin/bash

#create the ssh keys

ssh-keygen -t rsa -b 4096 -P '' -f ./bitrise-ssh -m PEM

#this will generate 2 files for you bitrise-ssh and bitrise-ssh.pub these are the private and the public keys.
#the public key can be used normally, the private key needs a modification, I will attach a screenshot below
#basically you need to escape the new line characters

#this will register the repository to bitrise
#the first one is an example the second is the actual one
#curl -X POST -H 'Authorization: ACCESS-TOKEN' 'https://api.bitrise.io/v0.1/apps/register' -d '{"provider":"github","is_public":false,"repo_url":"git@github.com:api_demo/example-repository.git","type":"git","git_repo_slug":"example-repository","git_owner":"api_demo"}'

curl -X POST -H 'Authorization: U8HOfHobVfFme3WlQFsr3vNSgazU_Bsu_BAHBDBdIIr6CmrQHKONALwoSBChtqwX7w4knrL2pmovpMETVGgbkg' 'https://api.bitrise.io/v0.1/apps/register' -d '{"provider":"github","is_public":true,"repo_url":"git@github.com:kchrs/autobuild","type":"git","git_repo_slug":"autobuild","git_owner":"kchrs"}'

#registering the ssh-key we created in the first call
#in the private key you have to change the \n-s to \\n in the bitrise-ssh file

#curl -X POST -H 'Authorization: ACCESS-TOKEN' 'https://api.bitrise.io/v0.1/apps/APP-SLUG/register-ssh-key' -d '{"auth_ssh_private_key":"your-private-ssh-key","auth_ssh_public_key":"your-public-ssh-key","is_register_key_into_provider_service":false}'

curl -X POST -H 'Authorization: U8HOfHobVfFme3WlQFsr3vNSgazU_Bsu_BAHBDBdIIr6CmrQHKONALwoSBChtqwX7w4knrL2pmovpMETVGgbkg' 'https://api.bitrise.io/v0.1/apps/2e16a782f7d365df/register-ssh-key' -d '{"auth_ssh_private_key":"-----BEGIN RSA PRIVATE KEY-----\n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\n-----END RSA PRIVATE KEY-----\n","auth_ssh_public_key":"ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQC5mQCiDCPBjWbtBSeRbPxRIVhAMSADCZUCYZCA8Be0qMHXDv5mUeBEKbvQ9/9jsU4qctepJwJAhb7hCtYBkjStc21hEX/zfOrfiWL9W7D64ZGkPKR90xQbE8qnMMpB0/gFwVYVK3EvN/CQydVSGIbdpvAhgTNtTJg1O8sYeBUpd8MqWntNO77nH9TopZwrVw1uzTDdX3BYKpQVZUclUS2EDCbCD2w3+Ip1Gue+jNnZg+xttLgMWcF74EBPVzuPCYlJOWlVvxPwTYtZ8YayXV5awoRqWo7OqYxm4t2K8ddk0xEzSxvF3+Tw2v/WgJtWhv0BoFGWg3HOH/Ky8N4mAtKaXwCpdMhJLpNWieaQ2UCkYuOWJPOSa72exj5Io5SaM1fECeBM9jkrao4uUmCG7im6C+sdglhyiCTj6RAJ9p9ExHQIQqfeyFOMtE0UfaRAeFF1l4G0vwEwjbx36SFFXxslwWJbrzqm60elSw99O2O4esif6X9Zl2X0C03IOmgiKa5jawcNm0XrMcEL6xWa/0NgJ//xlO1MkR1uVHxWa3FoGSaV0uf0iorxlRdeaywppLhPXZ3GozYhmoRLjS8+D1G6ZxxaDfDw5ieQEmpeU8E9rja3Nk9b3ZzRTkdW13H4Wwodr6PQySuOhGP6ef8tfEwJKvtoHYivQ/yxqKCxVKFHJqjBnysxLBi5MQ== fehersandor@Fehers-MBP.localdomain","is_register_key_into_provider_service":false}'

#finish the setup
curl -X POST -H 'Authorization: ACCESS-TOKEN' 'https://api.bitrise.io/v0.1/apps/APP-SLUG/finish' -d '{"project_type":"ios","stack_id":"osx-vs4mac-stable","config":"default-ios-config","mode":"manual","envs":{"env1":"val1","env2":"val2"},"organization_slug":"e1ec3dea540bcf21"}'

curl -X POST -H 'Authorization: U8HOfHobVfFme3WlQFsr3vNSgazU_Bsu_BAHBDBdIIr6CmrQHKONALwoSBChtqwX7w4knrL2pmovpMETVGgbkg' 'https://api.bitrise.io/v0.1/apps/2e16a782f7d365df/finish' -d '{"project_type":"ios","stack_id":"osx-vs4mac-stable","config":"default-ios-config","mode":"manual","envs":{"env1":"val1","env2":"val2"},"account_slug":"775ee9ac15f4ee42"}'